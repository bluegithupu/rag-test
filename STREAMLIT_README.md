# RAG 系统 Streamlit 界面

这个 Streamlit 界面为 RAG 系统提供了一个用户友好的 Web 前端，通过 API 调用与后端通信。

## 功能

- 查询 RAG 系统并获取回答
- 上传和索引文档
- 索引本地目录中的文档
- 索引网页 URL
- 管理文档索引

## 安装

1. 确保已安装所有依赖：

```bash
./setup_streamlit.sh
```

或手动安装：

```bash
pip install -r requirements.txt
```

## 使用方法

### 启动后端 API 服务器

首先，启动 RAG 系统的 API 服务器：

```bash
python server.py
```

服务器将在 http://localhost:8000 上运行。

### 启动 Streamlit 界面

使用提供的脚本启动 Streamlit 界面：

```bash
./run_streamlit.py
```

或直接使用 Streamlit 命令：

```bash
streamlit run streamlit_app.py
```

Streamlit 界面将在 http://localhost:8501 上运行。

## 界面使用指南

### 查询

1. 点击"查询"标签页
2. 在文本框中输入您的问题
3. 点击"提交查询"按钮
4. 查看生成的回答

### 文档管理

#### 上传文档

1. 点击"文档管理"标签页
2. 使用文件上传器选择要上传的文件（支持 TXT、PDF、DOCX、HTML）
3. 点击"索引上传的文档"按钮
4. 等待索引完成

#### 索引目录

1. 在"索引目录"部分输入本地目录路径
2. 选择是否递归索引子目录
3. 点击"索引目录"按钮

#### 索引网页

1. 在"索引网页"部分输入 URL（每行一个）
2. 点击"索引 URL"按钮

#### 清除索引

1. 点击"清除所有索引"按钮（谨慎使用，这将删除所有已索引的文档）

## 配置

在 Streamlit 界面的侧边栏中，您可以配置 API URL。默认为 http://localhost:8000。

## 故障排除

- **无法连接到 API**：确保 API 服务器已启动并且 URL 正确
- **上传文件失败**：检查文件格式是否受支持
- **索引目录失败**：确保目录路径正确且可访问
- **查询没有相关结果**：确保已索引相关文档

## 注意事项

- Streamlit 界面通过 API 调用与后端通信，确保两者都在运行
- 大文件上传和索引可能需要较长时间
- 为获得最佳性能，建议在同一台机器上运行前端和后端
